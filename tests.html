<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test Trials</title>
</head>
<body>
<canvas id="myCanvas" width="1000" height="400" style="border: solid black 2px">
</canvas>
<div class="slidecontainer" id="slider">
    <input onmouseup="animateAgain()" type="range" min="1" max="200" value="100" class="slider" style="width:600px" id="myRange">
    <button id="nextButton" onclick="newAnimation()" style="display:inline">New Animation</button>
</div>
<label for="mirroring">Direction</label>
<select id="mirroring">
    <option value="No">Left to Right</option>
    <option value="Yes">Right to Left</option>
</select>
<label for="timing">Timing</label>
<select id="timing">
    <option value="canonical">Canonical</option>
    <option value="reversed">Reversed</option>
</select>
<label for="aHide">Hide A</label>
<select id="aHide">
    <option value="No">No</option>
    <option value="Yes">Yes</option>
</select>
<label for="extraObjects">Extra Objects</label>
<select id="extraObjects">
    <option value="No">No</option>
    <option value="Yes">Yes</option>
</select>
<label for="faces">Faces</label>
<select id="faces">
    <option value="No">No</option>
    <option value="Yes">Yes</option>
</select>

<label for="speed"> Speed </label>
<input id="speed" type="number" min="0.1" max="1" step="0.1" value="0.4">
<button onclick="window.location.href = 'training.html'">See "Agentic" Training</button>
<script src="classes.js"></script>
<script>
    newAnimation();

    function animateAgain (){
        for (var i = 0; i < window.myRectangle.animationTimer.length; i++) {
            clearTimeout(window.myRectangle.animationTimer[i])
        }
        window.myRectangle.animationStarted = Infinity;
        window.myRectangle.animationEnded = false;
        window.myRectangle.resetSquares();
        window.myRectangle.draw();
        window.myRectangle.setTimeouts();
    }

    function newAnimation () {
        // set up rectangle
        var colours, mirroring, timing, targetSync, AHidden, stickAndHole, conditionArray, squareDimensions, speed, canvas, slider, faces;

        // change variables here
        colours = ["red", "blue", "purple"];
        mirroring = document.getElementById("mirroring").value === "Yes";
        timing = document.getElementById("timing").value;
        targetSync = "B";
        AHidden = document.getElementById("aHide").value === "Yes";
        stickAndHole = document.getElementById("extraObjects").value === "Yes";
        squareDimensions = [50, 50];
        speed = Number(document.getElementById("speed").value);
        conditionArray = [timing, targetSync, AHidden, stickAndHole];
        canvas = document.getElementById("myCanvas");
        slider = document.getElementById("myRange");
        faces = document.getElementById("faces").value === "Yes";

        delete window.myRectangle;
        window.myRectangle = new testAnimation(colours, mirroring, conditionArray, squareDimensions, canvas, slider, speed, faces);
        animateAgain()
    }

</script>
</body>
</html>